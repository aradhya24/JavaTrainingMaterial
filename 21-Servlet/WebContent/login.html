<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Login - E-Commerce</title>
  <!-- Bootstrap 5 CDN -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <!-- Font Awesome (for icons, optional) -->
  <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
  <style>
    body {
      background-color: #f8f9fa;
    }

    .form-card {
      max-width: 400px;
      margin: auto;
    }

    .hidden {
      display: none !important;
    }
  </style>
</head>
<body>

  <div class="container mt-5">
    <div class="card shadow-sm p-4 form-card">
      <h4 class="text-center mb-4">🛒 E-Commerce Portal</h4>

      <!-- 🔐 Login Form -->
      <form id="loginForm" action="login" method="post">
        <div class="mb-3">
          <label for="usernameLogin" class="form-label">Username</label>
          <input type="text" class="form-control" id="usernameLogin" name="username" required>
        </div>
        <div class="mb-3">
          <label for="passwordLogin" class="form-label">Password</label>
          <input type="password" class="form-control" id="passwordLogin" name="password" required>
        </div>
        <div class="d-flex justify-content-between align-items-center mb-3">
          <div class="form-check">
            <input class="form-check-input" type="checkbox" id="remember">
            <label class="form-check-label" for="remember">Remember me</label>
          </div>
          <a href="#" onclick="showForm('forgotForm')">Forgot password?</a>
        </div>

        <!-- Error message -->
        <div id="loginError" class="alert alert-danger text-center py-2 px-3 mb-3 hidden" role="alert">
          Invalid username or password.
        </div>

        <button type="submit" class="btn btn-primary w-100">Login</button>
        <div class="text-center mt-3">
          <p>New user? <a href="#" onclick="showForm('registerForm')">Register</a></p>
        </div>
      </form>

      <!-- 📝 Register Form -->
      <form id="registerForm" class="hidden" action="register" method="post">
        <div class="mb-3">
          <label for="usernameRegister" class="form-label">Username</label>
          <input type="text" class="form-control" id="usernameRegister" name="username" required>
        </div>
        <div class="mb-3">
          <label for="passwordRegister" class="form-label">Password</label>
          <input type="password" class="form-control" id="passwordRegister" name="password" required>
        </div>
        <div class="mb-3">
          <label for="phoneRegister" class="form-label">Phone Number</label>
          <input type="tel" class="form-control" id="phoneRegister" name="phone" required>
        </div>
        <button type="submit" class="btn btn-success w-100">Register</button>
        <div class="text-center mt-3">
          <a href="login.html" onclick="showForm('loginForm')">Back to Login</a>
        </div>
      </form>

      <!-- 🔄 Forgot Password (Single Step) -->
      <form id="forgotForm" class="hidden" action="forgot-password" method="post">
        <div class="mb-3">
          <label for="usernameForgot" class="form-label">Username</label>
          <input type="text" class="form-control" id="usernameForgot" name="username" required>
        </div>
        <div class="mb-3">
          <label for="phoneForgot" class="form-label">Phone Number</label>
          <input type="tel" class="form-control" id="phoneForgot" name="phone" required>
        </div>
        <div class="mb-3">
          <label for="newPassword" class="form-label">New Password</label>
          <input type="password" class="form-control" id="newPassword" name="newPassword" required>
        </div>
        <button type="submit" class="btn btn-dark w-100">Reset Password</button>
        <div class="text-center mt-3">
          <a href="login.html" onclick="showForm('loginForm')">Back to Login</a>
        </div>
      </form>
     
    </div>
  </div>

  <script>
    function showForm(formId) {
      const forms = ["loginForm", "registerForm", "forgotForm"];
      forms.forEach(id => {
        const form = document.getElementById(id);
        if (form) form.classList.add("hidden");
      });
      document.getElementById(formId).classList.remove("hidden");
    }

    window.onload = function () {
      const params = new URLSearchParams(window.location.search);
      if (params.get("error") === "true") {
        document.getElementById("loginError").classList.remove("hidden");
      }
    };
  </script>
  
  
  
  <div id="toast" class="toast" style="display:none;"></div>

<script>
  function getQueryParam(key) {
    const urlParams = new URLSearchParams(window.location.search);
    return urlParams.get(key);
  }

  const toastMessage = getQueryParam("toast");
  const toastStatus = getQueryParam("status");

  if (toastMessage) {
    const toast = document.getElementById("toast");
    toast.textContent = decodeURIComponent(toastMessage);
    toast.style.display = "block";
    toast.style.background = toastStatus === "success" ? "#28a745" : "#dc3545"; // green/red

    setTimeout(() => {
      toast.style.display = "none";
      window.history.replaceState({}, document.title, window.location.pathname); // clean URL
    }, 3000);
  }
</script>

<style>
  .toast {
    position: fixed;
    bottom: 20px;
    right: 20px;
    padding: 14px 22px;
    border-radius: 6px;
    font-size: 16px;
    color: #fff;
    z-index: 1000;
    font-family: sans-serif;
  }
</style>




  
</body>
</html>
